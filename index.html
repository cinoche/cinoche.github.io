<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">

	<title>Cinoche</title>

	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="stylesheet" href="global.css">
</head>
<style>
	#myURL {
		width: 100%;
		text-align: left;
		background-color: white;
	}
</style>

<body style="background-color:black;" data-new-gr-c-s-check-loaded="14.980.0" data-gr-ext-installed="">

	<main class="svelte-16wde2k">
		<div id="overlay"
		    onclick="divOverlayAllOff()"
			style="display:none; background: rgba(255, 255, 255, 0.25); position:absolute; top:0px; right:0px; bottom:0px; left:0px;">
		</div>
		<div id="fullscreen"
			style="display:none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); color: black; background: rgba(255, 255, 255, 0.95); border-radius: 25px; border:1px solid black; box-shadow: 0px 0px 30px 10px #000000;">
			<p><a href="https://www.youtube.com/redirect?q=https://cinoche.github.io/"><img src="logos/fullscreen.jpg"
						alt="GO FULL SCREEN" width=40%></a></p>
			<p>Cinoche n'est pas en plein ecran.</p>
			<p>Pour une meilleur experience voulez-vous passer en plein ecran?</p>
			<p>
				<button style="width: 20%; height: 20%; background-color: blue; color: white;"
					onclick="window.location.replace('https\://www.youtube.com/redirect?q=' + url + '/')">Oui</button>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<button style="width: 20%; height: 20%;" onclick="divFullscreen('fullscreen')">Non</button>
			</p>
		</div>
		<p>
			<a href="https://tv.bell.ca/"><img src="logos250/bell.png" alt="Bell Fibe TV" align="middle" width=20%></a>
			<a href="https://www.crave.ca/en"><img src="logos250/crave.png" alt="Crave" align="middle" width=20%></a>
			<a href="https://www.disneyplus.com/fr-ca/login"><img src="logos250/disneyplus.png" alt="Disney+"
					align="middle" width=20%></a>
			<a href="https://www.crave.ca/en/hbo"><img src="logos250/hbogo.png" alt="HBO" align="middle" width=20%></a>
			<a href="https://www.dazn.com/"><img src="logos250/dazn.png" alt="DAZN" align="middle" width=20%></a>
			<a href="https://netflix.com/"><img src="logos250/netflix.png" alt="Tubi TV" align="middle" width=20%"></a>
			<a href="https://noovo.ca/"><img src="logos250/noovo.png" alt="Tubi TV" align="middle" width=20%></a>
			<a href="https://www.paramountplus.com/ca/"><img src="logos250/paramountplus.png" alt="Paramount+"
					align="middle" width=20%></a>
			<a href="https://www.primevideo.com"><img src="logos250/prime.png" alt="Amazon Prime" align="middle"
					width=20%></a>
			<a href="https://ici.tou.tv/"><img src="logos250/toutv.png" alt="TouTV" align="middle" width=20%></a>
			<a href="https://tubitv.com/"><img src="logos250/tubitv.png" alt="Tubi TV" align="middle" width=20%></a>
			<a href="https://www.qub.ca/tvaplus"><img src="logos250/tvaplus.png" alt="Twitch" align="middle"
					width=20%></a>
			<a href="https://www.twitch.com"><img src="logos250/twitch.png" alt="Twitch" align="middle" width=20%></a>
			<a href="https://tv.virginmobile.ca/"><img src="logos250/virgintv.png" alt="Twitch" align="middle"
					width=20%></a>
			<a href="https://www.youtube.com"><img src="logos250/youtube.png" alt="Youtube" align="middle"
					width=20%></a>
			<a onclick="divFullscreen('myURL')"><img align="middle" width=20% src="logos250/chromium.png"></a>
		</p>

		<div id="myURL"
			style="display:none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; background: white; border:1px solid black; box-shadow: 0px 0px 30px 10px #000000;">
			<input style="border: 1px solid white; width: 100%;" type="text" id="myURLText" value="http://"
				onkeypress="navigate(event)">
		</div>
		<div id="info"
			style="display:none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; background: black; border:1px solid white; box-shadow: 0px 0px 30px 10px #000000;">

			<p id="resolution"></p>
			<p id="agent"></p>
			<p id="version"></p>
			<button onclick="divFullscreen('info')">Close</button>
		</div>
		<div style="position:fixed; bottom: 0; right: 0;">
			<a onclick="divFullscreen('info')"><img src="logos/info.png"></a>
		</div>

		<script>
			var version = "1.0.0";
			var w = window.innerWidth
				|| document.documentElement.clientWidth
				|| document.body.clientWidth;

			var h = window.innerHeight
				|| document.documentElement.clientHeight
				|| document.body.clientHeight;

			var x = navigator.userAgent;
			var url = window.location.href;


			document.getElementById("resolution").innerHTML = "Browser inner window width: " + w + ", height: " + h + ".";
			document.getElementById("agent").innerHTML = "User-agent header sent: " + x;
			document.getElementById("version").innerHTML = "Cinoche version: " + version;

			// Test if screes resolution is larger than 1130. Tesla full screen resolution is reported as w: 1111 h: 694
			// Tesla browser when not in full screen is reported as 1130 as of 2021.4.x release
			if (w >= 1130 && x.includes("Tesla")) {
				divFullscreen('fullscreen')
				//document.getElementById("fullscreen").style.display = "inline";
				// Test if this is running on a Tesla. If so show the fullscreen button when not in fullscreen only
				if (x.includes("Tesla")) {
					// Simulate an HTTP redirect:
					//	window.location.replace("https://www.youtube.com/redirect?q=" + url + "/");
					// Change image property fron none to inline so it is displayed
					//document.getElementById("agent").innerHTML = "Running in a Tesla Browser";
					//	document.getElementById("img1").style.display = "inline";
				}
				else {
					//document.getElementById("agent").innerHTML = "Running in a Generic Browser";
				}
			}

			function divOverlay(name) {
				var x = document.getElementById(name);
				if (x.style.display === "none") {
					x.style.display = "block";
				} else {
					x.style.display = "none";
				}
			}

			function divOverlayOff(name) {
				var x = document.getElementById(name);
				if (x.style.display === "block") {
					x.style.display = "none";
				}
			}

			function divFullscreen(name) {
				divOverlay('overlay');
				divOverlay(name);
			}

			function divOverlayAllOff() {
				divOverlayOff('overlay');
				divOverlayOff('fullscreen');
				divOverlayOff('myURL');
				divOverlayOff('info');
			}

			function navigate(event) {
				if (event.keyCode == 13) {
					var url = document.getElementById("myURLText");
					window.location.replace(encodeURIComponent(url.value));
				}
			}

			function getUrlVars() {
				var vars = {};
				var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
					vars[key] = value;
				});
				return vars;
			}

			function getUrlParam(parameter, defaultvalue) {
				var urlparameter = defaultvalue;
				if (window.location.href.indexOf(parameter) > -1) {
					urlparameter = getUrlVars()[parameter];
				}
				return urlparameter;
			}

			// Add the ability to set the default URL value to an externally provided URL variable like:
			//
			// https://cinoche.github.io/?url=http://some.url.com
			//
			// otherwise the default will remain: http://
			//
			var reveivedURL = getUrlParam('url', 'Empty');

			// alert(reveivedURL);
			if (!(reveivedURL === 'Empty')) {
				//alert("Setting URL: " + reveivedURL);
				const urlDefaultValue = document.getElementById("myURLText");
				// setting the value
				urlDefaultValue.value = decodeURIComponent(reveivedURL);
			}
		</script>
	</main>
</body>

</html>